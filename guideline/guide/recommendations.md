# Guild System - Opus 4.1 Optimization Guide

## Critical Context Understanding
<guild_abstraction>
Guild intelligence maintains complete abstraction:
- NO code samples in templates
- NO specific technology references
- USE `[placeholder]` patterns
- RELY on native intelligence for implementation
  </guild_abstraction>

## XML Structure (Opus 4.1 Native)

<task_structure>
<task>Clear task description</task>
<context>Project information and constraints</context>
<requirements>Specific needs and success criteria</requirements>
<examples>Pattern demonstrations when needed</examples>
</task_structure>

## Lost in Middle Mitigation

<document_positioning>
  <!-- Critical content ALWAYS at edges -->
<critical>Most important information HERE</critical>
<supporting>Less critical in middle sections</supporting>
<instruction>Your actual task ALWAYS LAST</instruction>
</document_positioning>

## Specialist Creation Pattern

<specialist_template>
<role>You are a [specific expertise] specialist</role>

<project_context>
Working on [project] using [discovered technologies]
Following patterns from [identified locations]
Success criteria: [measurable outcomes]
</project_context>

  <scratchpad>
    <!-- Maintains state across interactions -->
    Key facts: [discovered information]
    Decisions: [choices made]
    Current: [active work status]
  </scratchpad>

<task_execution>
<!-- Specific work to perform -->
</task_execution>
</specialist_template>

## Parallel Execution (Opus 4.1 Strength)

<use_parallel_tool_calls>
For maximum efficiency, invoke all independent tools simultaneously.
Batch operations: file reads, analysis tasks, verification checks.
Default to parallel unless explicit dependencies exist.
</use_parallel_tool_calls>

## Verification Framework

<verification_streams>
1. **Functional**: Requirements met, features working
2. **Integration**: Components communicate properly
3. **Quality**: Patterns followed, maintainable code
4. **User**: Explicit approval (final authority)
   </verification_streams>

## Tool Definition Standards

<tool_schema>
{
"name": "tool_name",
"description": "3-4 sentences: what it does, when to use, limitations, outcomes",
"input_schema": {
"type": "object",
"properties": {
"param": {
"type": "string",
"description": "Clear purpose and format"
}
},
"required": ["param"]
}
}
</tool_schema>

## Anti-Patterns

<avoid>
  ❌ Direct execution without Task tool
  ❌ Sequential operations when parallel possible
  ❌ Creating specialists without discovery
  ❌ Vague or unstructured prompts
  ❌ Critical info in middle of context
  ❌ Skipping verification steps
</avoid>

## Success Checklist

<implementation>
  ☑ XML structure throughout
  ☑ Critical content at edges
  ☑ Parallel execution default
  ☑ Scratchpad for state
  ☑ Clear success criteria
  ☑ Systematic verification
  ☑ User approval obtained
</implementation>
